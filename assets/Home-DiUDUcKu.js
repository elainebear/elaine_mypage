import{r,j as e,L as w,u as _,a as E}from"./index-BigfRqa-.js";import{g as S,c as C,d as L}from"./firebase-DUA4t6XG.js";import{U as I}from"./useArticles--6033Sbz.js";function k(){const s=r.useRef(null),[d,a]=r.useState(!1),[c,m]=r.useState("STICK TO IT"),o=r.useRef({x:0,y:0});return r.useEffect(()=>{const n=()=>{const f=Array.from(s.current.querySelectorAll(".hero-letter")).map(i=>({el:i,x:0,y:0,tx:0,ty:0})),x=new IntersectionObserver(i=>{i.forEach(p=>{p.isIntersecting?a(!0):a(!1)})},{threshold:.1});x.observe(s.current);const v=()=>{d&&(f.forEach(i=>{const p=i.el.getBoundingClientRect(),g=p.left+p.width/2,y=p.top+p.height/2,t=o.current.x-g,l=o.current.y-y,u=Math.sqrt(t*t+l*l),j=120;if(u<j){const N=(1-u/j)*40;i.tx=-t/u*N,i.ty=-l/u*N}else i.tx=0,i.ty=0;i.x+=(i.tx-i.x)*.1,i.y+=(i.ty-i.y)*.1,i.el.style.transform=`translate(${i.x}px, ${i.y}px)`}),requestAnimationFrame(v))};v();const b=i=>{o.current.x=i.clientX,o.current.y=i.clientY};return window.addEventListener("mousemove",b),()=>{window.removeEventListener("mousemove",b),x.disconnect()}};n(),m("Let's Get Started!"),n()},[d,c]),e.jsx("h1",{className:"hero-title",ref:s,children:c.split(" ").map((n,h,f)=>e.jsxs("span",{className:"hero-word",children:[n.split("").map((x,v)=>e.jsx("span",{className:"hero-letter",children:x},v)),h<f.length-1&&e.jsx("span",{children:" "})]},h))})}function A(){const[s,d]=r.useState([]);return r.useEffect(()=>{async function a(){const m=(await S(C(L,"collections"))).docs.map(o=>({id:o.id,...o.data(),date:o.data().c_date.toDate()}));d(m)}a()},[]),s}function R({article:s}){return e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card__pic"}),e.jsx("h2",{className:"card__title",children:e.jsx("b",{children:s.title})}),e.jsxs("p",{className:"card__date",children:["Date: ",s.date.toLocaleDateString()]}),e.jsx("p",{className:"card__abstr",children:s.abstr})]})}function T({collections:s}){const d=s.length>=2?[s[s.length-2],s[s.length-1],...s,s[0],s[1]]:[...s],[a,c]=r.useState(1),[m,o]=r.useState(!0),[n,h]=r.useState(!1),f=r.useRef(null),x=r.useRef(null),[v,b]=r.useState(2);r.useEffect(()=>{const t=()=>{window.innerWidth<550?b(1):b(2)};return t(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]);const i=100/v;r.useEffect(()=>{const t=()=>{clearInterval(x.current),x.current=setInterval(()=>{n||c(j=>j+1)},3e3)},l=()=>{clearInterval(x.current)},u=()=>{document.visibilityState==="visible"?t():l()};return t(),document.addEventListener("visibilitychange",u),()=>{l(),document.removeEventListener("visibilitychange",u)}},[n]),r.useEffect(()=>{const t=()=>{a===0?(o(!1),c(s.length)):a===d.length-2&&(o(!1),c(2)),h(!1)},l=f.current;return l.addEventListener("transitionend",t),()=>l.removeEventListener("transitionend",t)},[a,s.length,d.length]),r.useEffect(()=>{m||(f.current.offsetHeight,o(!0))},[m]),r.useEffect(()=>{const t=()=>{c(1)},l=()=>{var u;document.visibilityState==="visible"&&((u=f.current)==null||u.offsetHeight,c(j=>j))};return window.addEventListener("resize",t),document.addEventListener("visibilitychange",l),()=>{window.removeEventListener("resize",t),document.removeEventListener("visibilitychange",l)}},[]),r.useEffect(()=>{a>=d.length&&c(1)},[a,d.length]);const p=t=>{n||(h(!0),c(t+1))},g=()=>{n||(h(!0),c(t=>t+1))},y=()=>{n||(h(!0),c(t=>t-1))};return e.jsxs("div",{className:"slider",children:[e.jsx("div",{ref:f,className:"slider-wrapper",style:{transform:`translateX(-${a*i}%)`,transition:m?"transform 0.5s ease":"none"},children:d.map((t,l)=>t?e.jsx(w,{to:`/collections/${t.id}`,className:"slide",style:{flex:`0 0 calc((100% - ${20*v}px) / ${v})`},children:t.src?t.src:e.jsx("div",{className:"slide__pic",children:t.c_title})},`${t.id}-${l}`):null)}),e.jsx("button",{className:"arrow left",onClick:y,disabled:n,children:"❮"}),e.jsx("button",{className:"arrow right",onClick:g,disabled:n,children:"❯"}),e.jsx("div",{className:"dots",children:s.map((t,l)=>e.jsx("span",{className:`dot ${l===a-2?"active":""}`,onClick:()=>p(l)},l))})]})}function H(){const s=r.useRef(null);_(),E(n=>n.theme.mode);const d=()=>{var n;(n=s.current)==null||n.scrollIntoView({behavior:"smooth",block:"start"}),setTimeout(()=>{window.scrollBy(0,-35)},500)};r.useEffect(()=>{window.scrollTo(0,0)},[]);const c=I().sort((n,h)=>h.date-n.date).slice(0,3),o=A().sort((n,h)=>h.date-n.date).slice(0,3);return e.jsxs("div",{className:"hero-layout ${theme}",children:[e.jsxs("div",{className:"hero-section",children:[e.jsx(k,{}),e.jsx("button",{onClick:d,"aria-label":"scrolltocontent",className:"hero-section__button",children:e.jsx("font",{children:"⭣"})})]}),e.jsxs("div",{className:"body-items",ref:s,id:"homeContent",children:[e.jsxs("div",{className:"about_me",children:[e.jsx("h1",{id:"about_me_title",children:"About me"}),e.jsx("div",{className:"about_me-items ",id:"self-img",children:"照片"}),e.jsxs("div",{className:"about_me-items ",id:"self-des",children:[e.jsxs("div",{className:"des-font",children:[e.jsx("p",{children:"Hi there, I'm Elaine ♡ Welcome to my little blog corner~"}),e.jsx("p",{children:"As you can see, this place is still a work in progress🛠️ "}),e.jsx("p",{children:"But I'm working hard behind the scenes! "}),e.jsx("p",{children:"Hope to see you again soon with a cuter look✨"})]}),e.jsx("div",{className:"des-web",children:e.jsx("a",{href:"",target:"_blank",children:"Notion"})}),e.jsx("div",{className:"des-web",children:e.jsx("a",{href:"https://codepen.io/Elaine-the-animator",target:"_blank",children:"CodePen"})}),e.jsx("div",{className:"des-web",children:e.jsx("a",{href:"https://github.com/elainebear",target:"_blank",children:"GitHub"})})]})]}),e.jsxs("div",{className:"content",id:"homeArticle",children:[e.jsxs("div",{className:"articlePreview",children:[e.jsx("h2",{className:"content_h2",children:"Latest Posts"}),e.jsx("div",{className:"articleContent",children:c.map(n=>e.jsx(w,{to:`/articles/${n.id}`,children:e.jsx(R,{article:n})},n.id))}),e.jsx(w,{to:"/articles",className:"articlePreview__button--article",children:"Explore all articles ✨"})]}),e.jsxs("div",{className:"collectionPreview",children:[e.jsx("h2",{className:"content_h2",children:"New Posts"}),o.length>0&&e.jsx(T,{collections:o}),e.jsx(w,{to:"/collections",className:"collectionPreview__button--collection",children:"Explore all works ✨"})]})]})]})]})}export{H as default};
