import{r as i,j as e,L as N}from"./index-S9oBH_b4.js";import{g as E,c as _,d as I}from"./firebase-B-FRlTeJ.js";import{U as S}from"./useArticles-Th3_AIsg.js";/* empty css               */function C(){const t=i.useRef(null),[h,l]=i.useState(!1),[o,p]=i.useState("STICK TO IT"),a=i.useRef({x:0,y:0});return i.useEffect(()=>{const u=()=>{const v=Array.from(t.current.querySelectorAll(".hero-letter")).map(n=>({el:n,x:0,y:0,tx:0,ty:0})),r=new IntersectionObserver(n=>{n.forEach(j=>{j.isIntersecting?l(!0):l(!1)})},{threshold:.1});r.observe(t.current);const d=()=>{h&&(v.forEach(n=>{const j=n.el.getBoundingClientRect(),y=j.left+j.width/2,s=j.top+j.height/2,c=a.current.x-y,m=a.current.y-s,x=Math.sqrt(c*c+m*m),b=120;if(x<b){const w=(1-x/b)*40;n.tx=-c/x*w,n.ty=-m/x*w}else n.tx=0,n.ty=0;n.x+=(n.tx-n.x)*.1,n.y+=(n.ty-n.y)*.1,n.el.style.transform=`translate(${n.x}px, ${n.y}px)`}),requestAnimationFrame(d))};d();const g=n=>{a.current.x=n.clientX,a.current.y=n.clientY};return window.addEventListener("mousemove",g),()=>{window.removeEventListener("mousemove",g),r.disconnect()}};u(),p("Let's Get Started!"),u()},[h,o]),e.jsx("h1",{className:"hero-title",ref:t,children:o.split(" ").map((u,f,v)=>e.jsxs("span",{className:"hero-word",children:[u.split("").map((r,d)=>e.jsx("span",{className:"hero-letter",children:r},d)),f<v.length-1&&e.jsx("span",{children:" "})]},f))})}function L(){const[t,h]=i.useState([]);return i.useEffect(()=>{async function l(){const p=(await E(_(I,"collections"))).docs.map(a=>({id:a.id,...a.data(),date:a.data().c_date.toDate()}));h(p)}l()},[]),t}function A({article:t}){return e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card__pic"}),e.jsx("h2",{className:"card__title",children:e.jsx("b",{children:t.title})}),e.jsxs("p",{className:"card__date",children:["Date: ",t.date.toLocaleDateString()]}),e.jsx("p",{className:"card__abstr",children:t.abstr})]})}function R({collections:t}){const h=t.length>=2?[t[t.length-2],t[t.length-1],...t,t[0],t[1]]:[...t],[l,o]=i.useState(1),[p,a]=i.useState(!0),[u,f]=i.useState(!1),v=i.useRef(null),r=i.useRef(null),[d,g]=i.useState(2);i.useEffect(()=>{const s=()=>{window.innerWidth<550?g(1):g(2)};return s(),window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]);const n=100/d;i.useEffect(()=>{const s=()=>{clearInterval(r.current),r.current=setInterval(()=>{u||o(x=>x+1)},3e3)},c=()=>{clearInterval(r.current)},m=()=>{document.visibilityState==="visible"?s():c()};return s(),document.addEventListener("visibilitychange",m),()=>{c(),document.removeEventListener("visibilitychange",m)}},[u]),i.useEffect(()=>{const s=()=>{l===0?(a(!1),o(t.length)):l===h.length-2&&(a(!1),o(2)),f(!1)},c=v.current;return c.addEventListener("transitionend",s),()=>c.removeEventListener("transitionend",s)},[l,t.length,h.length]),i.useEffect(()=>{p||(v.current.offsetHeight,a(!0))},[p]),i.useEffect(()=>{const s=()=>{o(1)},c=()=>{var m;document.visibilityState==="visible"&&((m=v.current)==null||m.offsetHeight,o(x=>x))};return window.addEventListener("resize",s),document.addEventListener("visibilitychange",c),()=>{window.removeEventListener("resize",s),document.removeEventListener("visibilitychange",c)}},[]),i.useEffect(()=>{l>=h.length&&o(1)},[l,h.length]);const j=()=>{u||(f(!0),o(s=>s+1))},y=()=>{u||(f(!0),o(s=>s-1))};return e.jsxs("div",{className:"slider",children:[e.jsx("div",{ref:v,className:"slider-wrapper",style:{transform:`translateX(-${l*n}%)`,transition:p?"transform 0.5s ease":"none"},children:h.map((s,c)=>s?e.jsx(N,{to:`/collections/${s.id}`,className:"slide",style:{flex:`0 0 calc((100% - ${20*d}px) / ${d})`},children:s.src?e.jsx("img",{src:s.src,className:"slide__pic"}):e.jsx("div",{className:"slide__pic",children:s.c_title})},`${s.id}-${c}`):null)}),e.jsx("button",{className:"arrow left",onClick:y,disabled:u,children:"❮"}),e.jsx("button",{className:"arrow right",onClick:j,disabled:u,children:"❯"}),e.jsx("div",{className:"dots",children:t.map((s,c)=>{const m=[];for(let b=0;b<d;b++){const w=(l-2+b+t.length)%t.length;m.push(w)}const x=m.includes(c);return e.jsx("span",{className:`dot ${x?"active":""}`},c)})})]})}function H(){const t=i.useRef(null),[h,l]=i.useState(!1),o=()=>{var r;(r=t.current)==null||r.scrollIntoView({behavior:"smooth",block:"start"}),setTimeout(()=>{window.scrollBy(0,-35)},500)};i.useEffect(()=>{window.scrollTo(0,0)},[]);const a=S().sort((r,d)=>d.date-r.date).slice(0,3),f=L().sort((r,d)=>d.date-r.date).slice(0,3);return e.jsxs("div",{className:"hero-layout ${theme}",children:[e.jsxs("div",{className:"hero-section",children:[e.jsx(C,{}),e.jsx("button",{onClick:o,"aria-label":"scrolltocontent",className:"hero-section__button",children:e.jsx("font",{children:"⭣"})})]}),e.jsxs("div",{className:"body-items",ref:t,id:"homeContent",children:[e.jsxs("div",{className:"about_me",children:[e.jsx("h1",{id:"about_me_title",children:"About me"}),e.jsx("div",{className:"about_me-items ",id:"self-img",children:h?e.jsx("font",{children:" 現在還沒有圖片唷⭐⭐ "}):e.jsx("img",{src:"./image/me.jpg",onError:()=>l(!0),className:"mypic"})}),e.jsxs("div",{className:"about_me-items ",id:"self-des",children:[e.jsxs("div",{className:"des-font",children:[e.jsx("p",{children:"Hi there, I'm Elaine ♡ Welcome to my little blog corner~"}),e.jsx("p",{children:"As you can see, this place is still a work in progress🛠️ "}),e.jsx("p",{children:"But I'm working hard behind the scenes! "}),e.jsx("p",{children:"Hope to see you again soon with a cuter look✨"})]}),e.jsx("div",{className:"des-web",children:e.jsx("a",{href:"https://www.notion.so/1e0f76ff11e7809ca322cde3445690eb",target:"_blank",children:"Notion"})}),e.jsx("div",{className:"des-web",children:e.jsx("a",{href:"https://codepen.io/Elaine-the-animator",target:"_blank",children:"CodePen"})}),e.jsx("div",{className:"des-web",children:e.jsx("a",{href:"https://github.com/elainebear",target:"_blank",children:"GitHub"})})]})]}),e.jsxs("div",{className:"content",id:"homeArticle",children:[e.jsxs("div",{className:"articlePreview",children:[e.jsx("h2",{className:"content_h2",children:"Latest Posts"}),e.jsx("div",{className:"articleContent",children:a.map(r=>e.jsx(N,{to:`/articles/${r.id}`,children:e.jsx(A,{article:r})},r.id))}),e.jsx(N,{to:"/articles",className:"articlePreview__button--article",children:"Explore all articles ✨"})]}),e.jsxs("div",{className:"collectionPreview",children:[e.jsx("h2",{className:"content_h2",children:"New Posts"}),f.length>0&&e.jsx(R,{collections:f}),e.jsx(N,{to:"/collections",className:"collectionPreview__button--collection",children:"Explore all works ✨"})]})]})]})]})}export{H as default};
